<section>
    <div id="subscription-nav">
        <h2>Subscriptions</h2>

        <ul id="folderContainer" class="nobullet"></ul>
        <ul id="feedContainer" class="nobullet"></ul>
    </div>
</section>

<script type="text/javascript">
    $(function ($) {
        $.getJSON('/api/folder', function (data) {
            $('#folderTemplate').tmpl(data.folders).appendTo('#folderContainer');
            $('#feedTemplate').tmpl(data.feeds).appendTo('#feedContainer');

            $('li.folder > ul').toggle();
            console.log(data);
            $('.expander').click(function () {
                $(this).next('li.folder').children('ul').toggle();

                if ($(this).text() == '+') {
                    $(this).text('-');
                } else {
                    $(this).text('+');
                }
            });
        });
    });
</script>

<script id="folderTemplate" type="text/x-jQuery-tmpl">
    <a href="#" class="expander">+</a>
    <li class="folder ${unreadClass}"><a id="${id}" class="ajax" rel="#panel" href="/home/folder/${id}">${name} (${itemCount})</a>
        <ul class="nobullet">
            {{each feeds}}
        <li class="feed ${unreadClass}"><a id="${id}" class="ajax" rel="#panel" href="/home/feed/${id}">${name} (${itemCount})</a></li>
            {{/each}}
        </ul>
    </li>
</script>

<script id="feedTemplate" type="text/x-jQuery-tmpl">
    <li class="feed ${unreadClass}"><a id="${id}" class="ajax" rel="#panel" href="/home/feed/${id}">${name} (${itemCount})</a></li>
</script>


<h2>knowckout</h2>

<ul data-bind="foreach: items">
    <li>
        <span data-bind="text: name"></span>
        (<span data-bind="text: count"></span>)
    </li>

</ul>

<input type="button" data-bind="click: incrementCount" value="click" />

